<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BrewHaven — Café Shop Management System</title>
  <style>
    :root{
      --bg:#faf7f3; --card:#ffffff; --accent:#8b5e34; --muted:#6b6b6b; --success:#1fa34a;
      --glass: rgba(255,255,255,0.6);
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg, #fffaf6 0%, var(--bg) 100%);color:#222}
    header{display:flex;align-items:center;justify-content:space-between;padding:18px 28px;background:var(--card);backdrop-filter:blur(6px);box-shadow:0 2px 8px rgba(30,30,30,0.04);position:sticky;top:0;z-index:10}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:46px;height:46px;border-radius:8px;background:linear-gradient(135deg,#f4d9c4,#cda07a);display:grid;place-items:center;font-weight:700;color:#fff}
    nav{display:flex;gap:12px}
    nav a{padding:10px 12px;border-radius:8px;text-decoration:none;color:var(--muted);font-weight:600}
    nav a.active{color:var(--accent)}
    main{padding:28px;max-width:1100px;margin:18px auto}

    /* hero */
    .hero{display:grid;grid-template-columns:1fr 420px;gap:28px;align-items:center;margin-bottom:22px}
    .hero-card{background:var(--card);padding:24px;border-radius:14px;box-shadow:0 6px 18px rgba(30,30,30,0.06)}
    .hero h1{margin:0 0 14px;font-size:28px;color:var(--accent)}
    .hero p{margin:0 0 18px;color:var(--muted)}
    .callrow{display:flex;gap:10px}
    .btn{background:var(--accent);color:#fff;padding:10px 14px;border-radius:10px;border:none;font-weight:700;cursor:pointer}
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(139,94,52,0.12)}

    /* menu grid */
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    .card{background:var(--card);padding:14px;border-radius:12px;box-shadow:0 6px 14px rgba(20,20,20,0.04);display:flex;flex-direction:column;gap:8px}
    .thumb{height:140px;border-radius:8px;background:#eee;display:flex;align-items:center;justify-content:center;color:#999;font-weight:700}
    .meta{display:flex;justify-content:space-between;align-items:center}
    .price{font-weight:800;color:var(--accent)}

    /* sidebar cart */
    .layout{display:flex;gap:20px}
    .content{flex:1}
    aside{width:340px}
    .cart{position:sticky;top:88px;background:var(--card);padding:14px;border-radius:12px;box-shadow:0 6px 20px rgba(20,20,20,0.06)}
    .cart h3{margin:0 0 8px}
    .cart-list{display:flex;flex-direction:column;gap:8px;max-height:320px;overflow:auto;padding-right:6px}
    .cart-item{display:flex;justify-content:space-between;gap:8px;align-items:center}
    .qty{display:flex;align-items:center;gap:6px}
    .small{font-size:13px;color:var(--muted)}

    /* admin */
    .admin{margin-top:18px;background:linear-gradient(180deg, rgba(139,94,52,0.03), rgba(139,94,52,0.01));padding:12px;border-radius:12px}
    .form{display:grid;grid-template-columns:1fr 120px;gap:8px}
    input,select,textarea{padding:8px;border-radius:8px;border:1px solid #eee;outline:none}

    /* footer */
    footer{padding:18px;background:transparent;text-align:center;color:var(--muted);margin-top:22px}

    /* responsive */
    @media (max-width:980px){.grid{grid-template-columns:repeat(2,1fr)}.hero{grid-template-columns:1fr}aside{width:100%}.layout{flex-direction:column-reverse}}
    @media (max-width:600px){.grid{grid-template-columns:1fr}nav{display:none}.logo{width:40px;height:40px}}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">BH</div>
      <div>
        <div style="font-weight:800">BrewHaven</div>
        <div style="font-size:12px;color:var(--muted)">Café Shop Management</div>
      </div>
    </div>
    <nav>
      <a href="#home" class="active">Home</a>
      <a href="#menu">Menu</a>
      <a href="#admin">Admin</a>
      <a href="#contact">Contact</a>
    </nav>
  </header>

  <main>
    <section class="hero">
      <div class="hero-card">
        <h1>Welcome to BrewHaven</h1>
        <p>Manage your café menu, take orders, and keep a small admin panel — all in this single-page demo. Works fully offline using localStorage.</p>
        <div class="callrow">
          <button class="btn" id="view-menu">View Menu</button>
          <button class="btn ghost" id="open-admin">Open Admin</button>
        </div>

        <div class="admin small" style="margin-top:12px">
          <strong>Quick Stats:</strong>
          <div id="stats">Items: 0 · Cart: 0 · Revenue (mock): ₹0</div>
        </div>
      </div>

      <div class="hero-card" style="display:flex;flex-direction:column;gap:12px">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div style="font-weight:800">Today&apos;s Special</div>
            <div class="small">Flat ₹20 off for Cappuccino</div>
          </div>
          <div style="text-align:right">
            <div style="font-weight:900">Open</div>
            <div class="small">8:00 — 22:00</div>
          </div>
        </div>

        <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px">
          <div style="padding:10px;border-radius:8px;background:linear-gradient(90deg,#fffaf0,#fffefd);text-align:center">Order Pickup</div>
          <div style="padding:10px;border-radius:8px;background:linear-gradient(90deg,#fffafd,#fffdfb);text-align:center">Delivery</div>
        </div>
      </div>
    </section>

    <section id="menu" class="content">
      <div class="layout">
        <div class="content">
          <h2 style="margin-top:0">Menu</h2>
          <div class="grid" id="menu-grid">
            <!-- menu items rendered here -->
          </div>

          <div class="admin" id="admin-panel" style="display:none;margin-top:16px">
            <h3 id="admin-title">Admin — Add / Edit Menu Item</h3>
            <form id="item-form" class="form">
              <div>
                <input type="hidden" id="item-id" />
                <input id="item-name" placeholder="Item name (e.g. Cappuccino)" required />
                <input id="item-price" placeholder="Price (number)" required style="margin-top:8px" />
                <input id="item-category" placeholder="Category (Coffee, Snack)" style="margin-top:8px" />
                <textarea id="item-desc" placeholder="Short description" style="margin-top:8px"></textarea>
              </div>
              <div>
                <input id="item-image" placeholder="Image URL (optional)" />
                <button class="btn" type="submit" style="width:100%;margin-top:8px">Save</button>
                <button type="button" id="reset-item" class="btn ghost" style="width:100%;margin-top:8px">Reset</button>
              </div>
            </form>
            <div style="margin-top:10px" class="small">Tip: This is a demo admin. Data is stored in your browser only.</div>
          </div>

        </div>

        <aside>
          <div class="cart">
            <h3>Your Cart</h3>
            <div class="cart-list" id="cart-list">
              <!-- cart items -->
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px">
              <div class="small">Total:</div>
              <div class="price" id="cart-total">₹0</div>
            </div>
            <div style="margin-top:12px;display:flex;gap:8px">
              <button class="btn" id="checkout">Checkout</button>
              <button class="btn ghost" id="clear-cart">Clear</button>
            </div>
          </div>
        </aside>
      </div>
    </section>

    <section id="contact" style="margin-top:20px">
      <h3>Contact / About</h3>
      <div class="card" style="display:flex;flex-direction:column;gap:8px">
        <div>BrewHaven — demo café management system. Build and extend this to connect to a backend or a POS system.</div>
        <div class="small">Address: 123 Coffee Lane, YourCity</div>
        <div class="small">Phone: +91 90000 00000</div>
      </div>
    </section>

  </main>

  <footer>
    Made with ☕ · BrewHaven © <span id="year"></span>
  </footer>

  <script>
    // --- Data and persistence ---
    const DEFAULT_MENU = [
      {id: 'm1', name:'Espresso', price:80, category:'Coffee', desc:'Strong and concentrated', img:''},
      {id: 'm2', name:'Cappuccino', price:140, category:'Coffee', desc:'Foamy milk and espresso', img:''},
      {id: 'm3', name:'Latte', price:150, category:'Coffee', desc:'Smooth and milky', img:''},
      {id: 'm4', name:'Blueberry Muffin', price:90, category:'Snack', desc:'Freshly baked', img:''},
      {id: 'm5', name:'Iced Americano', price:120, category:'Coffee', desc:'Chilled espresso and water', img:''},
      {id: 'm6', name:'Chocolate Brownie', price:110, category:'Snack', desc:'Rich and fudgy', img:''}
    ];

    function uid(prefix='id'){return prefix+Math.random().toString(36).slice(2,9)}

    function loadMenu(){
      const raw = localStorage.getItem('brewhaven_menu');
      if(!raw) { localStorage.setItem('brewhaven_menu', JSON.stringify(DEFAULT_MENU)); return DEFAULT_MENU }
      try{return JSON.parse(raw)}catch(e){localStorage.setItem('brewhaven_menu', JSON.stringify(DEFAULT_MENU)); return DEFAULT_MENU}
    }

    function saveMenu(menu){localStorage.setItem('brewhaven_menu', JSON.stringify(menu)); renderMenu(); updateStats();}

    function loadCart(){
      const raw = localStorage.getItem('brewhaven_cart');
      if(!raw) return [];
      try{return JSON.parse(raw)}catch(e){return []}
    }
    function saveCart(cart){localStorage.setItem('brewhaven_cart', JSON.stringify(cart)); renderCart(); updateStats();}

    // --- Renderers ---
    const menuGrid = document.getElementById('menu-grid');
    const cartList = document.getElementById('cart-list');
    const cartTotalEl = document.getElementById('cart-total');
    const statsEl = document.getElementById('stats');

    function renderMenu(){
      const menu = loadMenu();
      menuGrid.innerHTML='';
      menu.forEach(item=>{
        const card = document.createElement('div'); card.className='card';
        const thumb = document.createElement('div'); thumb.className='thumb';
        thumb.textContent = item.img? '': (item.name.split(' ').map(s=>s[0]).slice(0,3).join(''));
        if(item.img){ thumb.style.backgroundImage = `url(${item.img})`; thumb.style.backgroundSize='cover'; thumb.style.color='rgba(255,255,255,0.9)'; }

        const title = document.createElement('div'); title.innerHTML=`<div style="font-weight:800">${escapeHtml(item.name)}</div><div class="small">${escapeHtml(item.desc||'')}</div>`;
        const meta = document.createElement('div'); meta.className='meta';
        meta.innerHTML = `<div class="price">₹${Number(item.price).toFixed(0)}</div>`;
        const btnWrap = document.createElement('div');
        const addBtn = document.createElement('button'); addBtn.className='btn'; addBtn.textContent='Add';
        addBtn.onclick = ()=> addToCart(item.id);
        const editBtn = document.createElement('button'); editBtn.className='btn ghost'; editBtn.textContent='Edit';
        editBtn.onclick = ()=> openEdit(item.id);
        btnWrap.style.display='flex'; btnWrap.style.gap='8px'; btnWrap.appendChild(addBtn); btnWrap.appendChild(editBtn);
        meta.appendChild(btnWrap);

        card.appendChild(thumb); card.appendChild(title); card.appendChild(meta);
        menuGrid.appendChild(card);
      })
    }

    function renderCart(){
      const cart = loadCart();
      cartList.innerHTML='';
      let total = 0;
      cart.forEach(it=>{
        const row = document.createElement('div'); row.className='cart-item';
        const left = document.createElement('div'); left.style.flex='1'; left.innerHTML = `<div style="font-weight:700">${escapeHtml(it.name)}</div><div class="small">₹${it.price} · ${escapeHtml(it.category||'')}</div>`;
        const right = document.createElement('div'); right.style.display='flex'; right.style.alignItems='center'; right.style.gap='8px';
        const qty = document.createElement('div'); qty.className='qty';
        const minus = document.createElement('button'); minus.textContent='−'; minus.onclick=()=> changeQty(it.id, it.qty-1);
        const plus = document.createElement('button'); plus.textContent='+'; plus.onclick=()=> changeQty(it.id, it.qty+1);
        const qval = document.createElement('div'); qval.textContent=it.qty; qval.style.minWidth='18px'; qval.style.textAlign='center';
        const rem = document.createElement('button'); rem.textContent='Remove'; rem.className='btn ghost'; rem.onclick=()=> removeFromCart(it.id);
        qty.appendChild(minus); qty.appendChild(qval); qty.appendChild(plus);
        right.appendChild(qty); right.appendChild(rem);
        row.appendChild(left); row.appendChild(right);
        cartList.appendChild(row);
        total += it.price * it.qty;
      })
      cartTotalEl.textContent = '₹' + total.toFixed(0);
      document.getElementById('stats').textContent = `Items: ${loadMenu().length} · Cart: ${cart.reduce((s,i)=>s+i.qty,0)} · Revenue (mock): ₹${total.toFixed(0)}`;
    }

    // --- Cart operations ---
    function addToCart(menuId){
      const menu = loadMenu(); const m = menu.find(x=>x.id===menuId); if(!m) return alert('Item not found');
      const cart = loadCart(); const exists = cart.find(x=>x.id===menuId);
      if(exists){ exists.qty += 1 } else { cart.push({id:menuId, name:m.name, price:Number(m.price), qty:1, category:m.category}) }
      saveCart(cart);
    }
    function changeQty(id, qty){
      const cart = loadCart(); const idx=cart.findIndex(x=>x.id===id); if(idx===-1) return;
      if(qty<=0){ cart.splice(idx,1) } else { cart[idx].qty = qty }
      saveCart(cart);
    }
    function removeFromCart(id){ const cart = loadCart(); const idx = cart.findIndex(x=>x.id===id); if(idx>-1){ cart.splice(idx,1); saveCart(cart);} }

    // --- Admin operations ---
    const adminPanel = document.getElementById('admin-panel');
    const itemForm = document.getElementById('item-form');
    const itemId = document.getElementById('item-id');
    const itemName = document.getElementById('item-name');
    const itemPrice = document.getElementById('item-price');
    const itemCategory = document.getElementById('item-category');
    const itemDesc = document.getElementById('item-desc');
    const itemImage = document.getElementById('item-image');

    document.getElementById('open-admin').addEventListener('click', ()=>{ adminPanel.style.display = adminPanel.style.display==='none'?'block':'none'; window.location.hash='#admin' })
    document.getElementById('view-menu').addEventListener('click', ()=>{ window.location.hash='#menu' })

    itemForm.addEventListener('submit', (e)=>{
      e.preventDefault();
      const menu = loadMenu();
      const id = itemId.value || uid('m');
      const obj = { id, name:itemName.value.trim(), price: Number(itemPrice.value)||0, category:itemCategory.value.trim(), desc:itemDesc.value.trim(), img:itemImage.value.trim() }
      const exists = menu.findIndex(x=>x.id===id);
      if(exists>-1){ menu[exists] = obj } else { menu.push(obj) }
      saveMenu(menu);
      itemForm.reset(); itemId.value=''; adminPanel.style.display='none';
    })

    document.getElementById('reset-item').addEventListener('click', ()=>{ itemForm.reset(); itemId.value=''; })

    function openEdit(id){
      const menu = loadMenu(); const it = menu.find(x=>x.id===id); if(!it) return;
      adminPanel.style.display='block'; itemId.value = it.id; itemName.value = it.name; itemPrice.value = it.price; itemCategory.value = it.category; itemDesc.value = it.desc; itemImage.value = it.img; window.location.hash='#admin';
    }

    // --- Checkout / clear ---
    document.getElementById('clear-cart').addEventListener('click', ()=>{ if(confirm('Clear cart?')){ saveCart([]) } })
    document.getElementById('checkout').addEventListener('click', ()=>{
      const cart = loadCart(); if(cart.length===0) return alert('Cart empty');
      // simple mock checkout
      const total = cart.reduce((s,i)=>s+i.qty*i.price,0);
      alert(`Order placed! Total: ₹${total.toFixed(0)} — (demo)\nOrder saved to mock receipts.`);
      // append to receipts (simple revenue mock)
      const receipts = JSON.parse(localStorage.getItem('brewhaven_receipts')||'[]');
      receipts.push({id: uid('r'), date: new Date().toISOString(), total, items: cart});
      localStorage.setItem('brewhaven_receipts', JSON.stringify(receipts));
      saveCart([]);
      updateStats();
    })

    // --- Helpers ---
    function updateStats(){
      document.getElementById('year').textContent = new Date().getFullYear();
      document.querySelectorAll('nav a').forEach(a=>a.classList.remove('active'));
      const hash = (window.location.hash||'#home').replace('#','');
      const nav = Array.from(document.querySelectorAll('nav a')).find(x=>x.getAttribute('href')===('#'+hash)); if(nav) nav.classList.add('active');
      renderCart();
    }

    function escapeHtml(s){ if(!s && s!==0) return ''; return s.toString().replace(/[&<>"']/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"})[c]) }

    // initial setup
    (function init(){ if(!localStorage.getItem('brewhaven_menu')) localStorage.setItem('brewhaven_menu', JSON.stringify(DEFAULT_MENU)); renderMenu(); renderCart(); updateStats(); })();

    // accessibility: keyboard quick add (1-6)
    window.addEventListener('keydown', e=>{
      if(e.key>='1' && e.key<='9'){
        const menu = loadMenu(); const idx = Number(e.key)-1; if(menu[idx]) addToCart(menu[idx].id);
      }
    })

  </script>
</body>
</html>
